<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	th:replace="~{fragments/layout :: layout (~{::body},'Account')}">
<head>
<meta charset="utf-8">
<meta name="description" content="アカウント情報を表示します。">
<title>アカウント管理</title>

<link href="css/common.css" rel="stylesheet" />
<link href="css/bootstrap.css" rel="stylesheet" />
<link href="css/jquery.bootgrid.css" rel="stylesheet" />

<link rel="stylesheet" type="text/css"
	href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" />

<!-- BootstrapのCSS読み込み -->
<link href="css/bootstrap.min.css" rel="stylesheet">
<!-- jQuery読み込み -->
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<!-- BootstrapのJS読み込み -->
<script src="js/bootstrap.min.js"></script>

</head>
<body>
	<script type="text/javascript">

	import com.zaxxer.hikari.HikariConfig;
	import com.zaxxer.hikari.HikariDataSource;

	import org.springframework.beans.factory.annotation.Autowired;
	import org.springframework.beans.factory.annotation.Value;
	import org.springframework.boot.SpringApplication;
	import org.springframework.boot.autoconfigure.SpringBootApplication;
	import org.springframework.context.annotation.Bean;
	import org.springframework.context.annotation.Configuration;
	import org.springframework.stereotype.Controller;
	import org.springframework.web.bind.annotation.RequestMapping;


	import org.springframework.security.config.annotation.authentication.configurers.GlobalAuthenticationConfigurerAdapter;
	import org.springframework.security.config.annotation.web.servlet.configuration.EnableWebMvcSecurity;

	import org.springframework.beans.factory.annotation.Autowired;
	import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;
	import org.springframework.security.config.annotation.web.builders.HttpSecurity;
	import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
	import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;
	import org.springframework.stereotype.Controller;
	import org.springframework.ui.Model;
	import org.springframework.web.bind.annotation.GetMapping;
	import org.springframework.web.bind.annotation.PostMapping;
	import org.springframework.web.bind.annotation.RequestMapping;
	import org.springframework.web.bind.annotation.RequestMethod;
	import org.springframework.web.bind.annotation.RequestParam;
	import org.springframework.security.web.util.matcher.AntPathRequestMatcher;

	import javax.sql.DataSource;
	import javax.servlet.http.HttpServletRequest;
	import java.sql.Connection;
	import java.sql.ResultSet;
	import java.sql.SQLException;
	import java.sql.Statement;
	import java.util.ArrayList;
	import java.util.List;
	import java.util.Map;

	@Controller
	@SpringBootApplication
	public class Account {

		public static void main(String[] args) throws Exception {
			SpringApplication.run(Account.class, args);
		}

		@RequestMapping("/db")
		String db(Map<String, Object> model) {
			try (Connection connection = dataSource.getConnection()) {
				Statement stmt = connection.createStatement();
				ResultSet rs = stmt.executeQuery("SELECT USERID,CONTENTS FROM botlog ORDER BY NO");

				while (rs.next()) {
					System.out.println(rs);
				}
			}
		}
	}

		@Value("${spring.datasource.url}")
		private String dbUrl;

		@Autowired
		private DataSource dataSource;


	</script>

	<div class="container">
		<div class="table-responsive">
			<table class='table table-striped table-bordered table-hover'>
				<thead class="thead-inverse">
					<tr>
						<th data-column-id='no' data-type='numeric' data-identifier='true'
							data-width='10%'>No</th>
						<th data-column-id='custid' data-width='20%'>ユーザーID</th>
						<th data-column-id='username' data-width='30%'>ユーザー名</th>
						<th data-column-id='orgname' data-width='30%'>所属</th>
						<th data-column-id='lore' data-width='10%'>権限</th>
					</tr>
				</thead>
				<tbody>
				</tbody>
			</table>
		</div>
	</div>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.js"></script>
	<script src="src/main/javascript/bootstrap.js"></script>
	<script src="src/main/javascript/jquery.bootgrid.js"></script>

	<script th:src="@{/webjars/jquery/jquery.min.js}"></script>
	<script th:src="@{/webjars/jquery-ui/jquery-ui.min.js}"></script>
	<script th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>

</body>
</html>
